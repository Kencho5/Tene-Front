<form
  [formGroup]="registerForm"
  (ngSubmit)="onSubmit()"
  class="flex flex-col gap-4"
>
  <app-auth-input
    [control]="registerForm.controls.name"
    type="text"
    placeholder="სახელი"
    [error]="submitted() && registerForm.controls.name.invalid"
  />

  <div class="relative">
    <app-auth-input
      [control]="registerForm.controls.email"
      type="email"
      placeholder="ელ. ფოსტა"
      [error]="submitted() && registerForm.controls.email.invalid"
    />

    <!--<button-->
    <!--  type="button"-->
    <!--  class="absolute right-3 top-1/2 -translate-y-1/2 text-sm font-semibold text-green-60"-->
    <!-->-->
    <!--  კოდის მიღება-->
    <!--</button>-->
  </div>

  <app-auth-input
    [control]="registerForm.controls.password"
    type="password"
    placeholder="პაროლი"
    [error]="submitted() && registerForm.controls.password.invalid"
  />

  @if (errorMessage()) {
    <div
      role="alert"
      aria-live="polite"
      class="flex items-start gap-3 rounded-xl border border-valencia-50/30 bg-valencia-50/5 px-3.5 py-2.5 backdrop-blur-sm"
    >
      <svg
        class="mt-0.5 h-5 w-5 flex-shrink-0 text-valencia-50"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
        />
      </svg>
      <p class="text-sm text-valencia-50">{{ errorMessage() }}</p>
    </div>
  }

  <button
    type="submit"
    [disabled]="isLoading()"
    [ngClass]="{
      'cursor-not-allowed bg-green-80': isLoading(),
      'hover:opacity-90': !isLoading(),
    }"
    [style.background]="
      !isLoading() ? 'linear-gradient(90deg, #0BB705 0%, #0AD810 100%)' : null
    "
    class="w-full rounded-full px-4 py-2.5 font-medium text-white transition-all"
  >
    @if (isLoading()) {
      <span>იტვირთება...</span>
    } @else {
      <span>რეგისტრაცია</span>
    }
  </button>
  <button
    type="button"
    (click)="authorizeWithGoogle()"
    [disabled]="isGoogleLoading()"
    [attr.aria-label]="'Google-ით რეგისტრაცია'"
    [ngClass]="{
      'cursor-not-allowed opacity-50': isGoogleLoading(),
    }"
    class="flex w-full items-center justify-center gap-3 rounded-full border border-platinum-20 px-4 py-2.5 font-medium transition-all hover:bg-platinum-10"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="16"
      height="16"
      viewBox="-3 0 262 262"
    >
      <path
        fill="#4285F4"
        d="M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027"
      />
      <path
        fill="#34A853"
        d="M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1"
      />
      <path
        fill="#FBBC05"
        d="M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782"
      />
      <path
        fill="#EB4335"
        d="M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251"
      />
    </svg>
    Google-ით შესვლა
  </button>

  <p class="text-center text-sm text-platinum-50">
    უკვე გაქვს ანგარიში?
    <a routerLink="/auth/login" class="font-semibold text-green-60"
      >ავტორიზაცია</a
    >
  </p>
</form>

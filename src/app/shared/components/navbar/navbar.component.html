<nav class="fixed top-0 z-40 h-[72px] w-full bg-white lg:h-20">
  <div
    class="container mx-auto flex h-full items-center justify-between px-4 lg:px-8"
  >
    <!-- Logo and Navigation Links -->
    <div class="flex items-center gap-12">
      <a routerLink="">
        <img
          src="/logo.svg"
          alt="Logo"
          class="h-[38px] w-[90px] sm:h-[34px] sm:w-20"
        />
      </a>

      <!-- Desktop Navigation Links -->
      <div
        class="hidden h-11 flex-nowrap items-center gap-2.5 rounded-full bg-platinum-10 p-1 text-sm font-semibold text-platinum-50 xl:flex"
      >
        <a
          routerLink="/"
          routerLinkActive="bg-white text-platinum-90 shadow-md"
          [routerLinkActiveOptions]="{ exact: true }"
          class="flex items-center gap-1.5 rounded-full px-3 py-2 transition-all"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M20 0V20H0V0H20Z" fill="white" fill-opacity="0.01" />
            <path
              d="M2.50318 8.33358C2.50275 8.33358 2.50237 8.33331 2.50223 8.3329L2.50218 8.33276C2.50205 8.33236 2.50218 8.33191 2.50252 8.33165L9.3861 2.97775C9.74721 2.69689 10.2529 2.69689 10.614 2.97775L17.4976 8.33165C17.4979 8.33191 17.498 8.33236 17.4979 8.33276L17.4978 8.3329C17.4977 8.33331 17.4973 8.33358 17.4969 8.33358H15.8334V15.6669C15.8334 16.2192 15.3857 16.6669 14.8334 16.6669H5.1667C4.61442 16.6669 4.1667 16.2192 4.1667 15.6669V8.33358H2.50318Z"
              stroke="#212121"
              stroke-width="2"
              stroke-linejoin="round"
            />
            <path
              d="M8.33337 11.6669C8.33337 10.7464 9.07956 10.0002 10 10.0002V10.0002C10.9205 10.0002 11.6667 10.7464 11.6667 11.6669V16.6669H8.33337V11.6669Z"
              stroke="#212121"
              stroke-width="2"
              stroke-linejoin="round"
            />
          </svg>

          მთავარი</a
        >
        <a
          routerLink="/products"
          routerLinkActive="bg-white text-platinum-90 shadow-md"
          class="flex items-center gap-1.5 rounded-full px-3 py-2 transition-all"
          >პროდუქტები</a
        >
        <a
          routerLink="/bins"
          routerLinkActive="bg-white text-platinum-90 shadow-md"
          class="flex items-center gap-1.5 rounded-full px-3 py-2 transition-all"
          >ურნები</a
        >
        <a
          routerLink="/coins"
          routerLinkActive="bg-white text-platinum-90 shadow-md"
          class="flex items-center gap-1.5 rounded-full px-3 py-2 transition-all"
          >ტენე ქულები</a
        >
        <a
          routerLink="/recycle"
          routerLinkActive="bg-white text-platinum-90 shadow-md"
          class="flex items-center gap-1.5 rounded-full px-3 py-2 transition-all"
          >გადადნობა</a
        >
        <a
          routerLink="/earn"
          routerLinkActive="bg-white text-platinum-90 shadow-md"
          class="flex items-center gap-1.5 rounded-full px-3 py-2 transition-all"
          >გამოიმუშავე თანხა</a
        >

        <!-- More Dropdown -->
        <div class="group relative pr-3">
          <button class="flex items-center">
            მეტი
            <svg class="ml-1 h-4 w-4" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
          <!-- Dropdown Menu -->
          <div
            class="invisible absolute left-0 top-full z-50 mt-2 w-[280px] rounded-2xl border border-platinum-20 bg-white text-sm text-platinum-90 opacity-0 shadow-sm transition-all duration-200 group-hover:visible group-hover:opacity-100"
          >
            <a
              routerLink="about"
              class="flex items-center justify-between px-4 py-2"
            >
              <div class="flex items-center gap-4">
                <svg
                  width="40"
                  height="40"
                  viewBox="0 0 40 40"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <rect width="40" height="40" rx="20" fill="#E8FEE7" />
                  <path
                    d="M20.0002 22.6666V19.7951M20.0002 17.0833C20.0002 17.0833 20.0042 17.0833 20.0068 17.0833M26.6668 19.9999C26.6668 23.6818 23.6821 26.6666 20.0002 26.6666C16.3183 26.6666 13.3335 23.6818 13.3335 19.9999C13.3335 16.318 16.3183 13.3333 20.0002 13.3333C23.6821 13.3333 26.6668 16.318 26.6668 19.9999Z"
                    stroke="#0D6E0E"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>

                ჩვენს შესახებ
              </div>
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M7.5 15L12.2378 10.5893C12.5874 10.2638 12.5874 9.73618 12.2378 9.41074L7.5 5"
                  stroke="#888888"
                  stroke-width="2"
                  stroke-linecap="round"
                />
              </svg>
            </a>
            <a
              routerLink="blog"
              class="flex items-center justify-between px-4 py-2"
            >
              <div class="flex items-center gap-4">
                <svg
                  width="40"
                  height="40"
                  viewBox="0 0 40 40"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <rect width="40" height="40" rx="20" fill="#E8FEE7" />
                  <path
                    d="M15.0002 26.0161C15.0002 26.0161 18.102 22.3147 20.0002 20.4166C21.8983 18.5184 22.9168 18.7499 23.9834 19.4899C25.05 20.2298 26.6035 22.0833 26.6035 22.0833M18.5187 17.4073C18.5187 18.021 18.0212 18.5184 17.4076 18.5184C16.7939 18.5184 16.2964 18.021 16.2964 17.4073C16.2964 16.7937 16.7939 16.2962 17.4076 16.2962C18.0212 16.2962 18.5187 16.7937 18.5187 17.4073ZM13.3335 24.1666C13.3335 25.5473 14.4528 26.6666 15.8335 26.6666H24.1668C25.5475 26.6666 26.6668 25.5473 26.6668 24.1666V15.8333C26.6668 14.4525 25.5475 13.3333 24.1668 13.3333H15.8335C14.4528 13.3333 13.3335 14.4525 13.3335 15.8333L13.3335 24.1666Z"
                    stroke="#0D6E0E"
                    stroke-width="2"
                    stroke-linejoin="round"
                  />
                </svg>

                ბლოგები
              </div>
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M7.5 15L12.2378 10.5893C12.5874 10.2638 12.5874 9.73618 12.2378 9.41074L7.5 5"
                  stroke="#888888"
                  stroke-width="2"
                  stroke-linecap="round"
                />
              </svg>
            </a>
            <a
              routerLink="contact"
              class="flex items-center justify-between px-4 py-2"
            >
              <div class="flex items-center gap-4">
                <svg
                  width="40"
                  height="40"
                  viewBox="0 0 40 40"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <rect width="40" height="40" rx="20" fill="#E8FEE7" />
                  <path
                    d="M17.2581 23.0943C14.3805 20.4608 13.6243 17.7333 13.468 16.0266C13.3727 14.986 14.1913 14.188 15.2238 14.0268L16.4133 13.841C17.5843 13.6581 18.689 14.4382 18.9084 15.603L19.0983 16.6114C19.1846 17.0697 18.9308 17.5241 18.4954 17.691C17.9978 17.8817 17.754 18.4388 18.0081 18.9072C18.3123 19.4678 18.7798 20.1943 19.396 20.7582C20.0122 21.3222 20.7772 21.7236 21.3625 21.977C21.8515 22.1887 22.3849 21.8966 22.5308 21.3841C22.6586 20.9356 23.0888 20.6427 23.5529 20.6881L24.5741 20.7881C25.7538 20.9037 26.6285 21.9351 26.5498 23.1177L26.47 24.319C26.4006 25.3616 25.6782 26.2476 24.6332 26.2447C22.9194 26.2398 20.1357 25.7278 17.2581 23.0943Z"
                    stroke="#0D6E0E"
                    stroke-width="2"
                  />
                </svg>

                კონტაქტი
              </div>
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M7.5 15L12.2378 10.5893C12.5874 10.2638 12.5874 9.73618 12.2378 9.41074L7.5 5"
                  stroke="#888888"
                  stroke-width="2"
                  stroke-linecap="round"
                />
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex items-center space-x-2 xl:space-x-6">
      <!-- Search Icon -->
      <button class="p-2 xl:p-0">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M20 20L16.1333 16.1333M18.2222 11.1111C18.2222 15.0385 15.0385 18.2222 11.1111 18.2222C7.18375 18.2222 4 15.0385 4 11.1111C4 7.18375 7.18375 4 11.1111 4C15.0385 4 18.2222 7.18375 18.2222 11.1111Z"
            stroke="#212121"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>

      <!-- Cart Icon -->
      <a class="relative p-2 xl:p-0" routerLink="/cart">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M16.0898 12C16.0898 11.4477 15.6421 11 15.0898 11C14.5375 11 14.0898 11.4477 14.0898 12H15.0898H16.0898ZM11.8898 15.2V16.2V15.2ZM9.68979 12C9.68979 11.4477 9.24207 11 8.68979 11C8.1375 11 7.68979 11.4477 7.68979 12H8.68979H9.68979ZM19.8735 8.57826L20.8313 8.29091V8.29091L19.8735 8.57826ZM4.00001 9.4403L5.00001 9.4403V9.4403H4.00001ZM4.12653 8.57827L3.1687 8.29092L4.12653 8.57827ZM4 17L5 17V17L4 17ZM19.1414 6.13795L18.1836 6.4253L19.1414 6.13795ZM4.85862 6.13796L5.81644 6.42531L4.85862 6.13796ZM15.0898 12H14.0898C14.0898 12.5835 13.858 13.1431 13.4454 13.5556L14.1525 14.2627L14.8596 14.9698C15.6473 14.1822 16.0898 13.1139 16.0898 12H15.0898ZM14.1525 14.2627L13.4454 13.5556C13.0328 13.9682 12.4733 14.2 11.8898 14.2V15.2V16.2C13.0037 16.2 14.072 15.7575 14.8596 14.9698L14.1525 14.2627ZM11.8898 15.2V14.2C11.3063 14.2 10.7467 13.9682 10.3342 13.5556L9.62705 14.2627L8.91994 14.9698C9.70759 15.7575 10.7759 16.2 11.8898 16.2V15.2ZM9.62705 14.2627L10.3342 13.5556C9.92157 13.1431 9.68979 12.5835 9.68979 12H8.68979H7.68979C7.68979 13.1139 8.13229 14.1822 8.91994 14.9698L9.62705 14.2627ZM4 9V10H19.7796V9V8H4V9ZM4.12653 8.57827L5.08436 8.86561L5.81644 6.42531L4.85862 6.13796L3.90079 5.85062L3.1687 8.29092L4.12653 8.57827ZM19.1414 6.13795L18.1836 6.4253L18.9157 8.86561L19.8735 8.57826L20.8313 8.29091L20.0992 5.8506L19.1414 6.13795ZM19.8735 8.57826L18.9157 8.86561C18.9716 9.05205 19 9.24566 19 9.44031H20H21C21 9.05101 20.9432 8.66379 20.8313 8.29091L19.8735 8.57826ZM4.00001 9.4403H5.00001C5.00001 9.24566 5.02843 9.05205 5.08436 8.86561L4.12653 8.57827L3.1687 8.29092C3.05684 8.6638 3.00001 9.05101 3.00001 9.4403H4.00001ZM4 17L3 17C3 19.2091 4.79086 21 7 21V20V19C5.89543 19 5 18.1046 5 17L4 17ZM20 17H19C19 18.1046 18.1046 19 17 19V20V21C19.2092 21 21 19.2091 21 17H20ZM16.2679 4V5C17.1511 5 17.9298 5.57933 18.1836 6.4253L19.1414 6.13795L20.0992 5.8506C19.5916 4.15867 18.0343 3 16.2679 3V4ZM7.7321 4V3C5.96566 3 4.40837 4.15868 3.90079 5.85062L4.85862 6.13796L5.81644 6.42531C6.07023 5.57934 6.84888 5 7.7321 5V4ZM20 9.44031H19V17H20H21V9.44031H20ZM4 17L5 17L5.00001 9.4403L4.00001 9.4403L3.00001 9.4403L3 17L4 17ZM7.7321 4V5H16.2679V4V3H7.7321V4ZM17 20V19H7V20V21H17V20Z"
            fill="#212121"
          />
        </svg>

        @if (cartService.itemCount() > 0) {
          <span
            class="absolute -right-1 -top-1 flex h-4 w-4 items-center justify-center rounded-full bg-valencia-50 text-[9px] font-semibold text-white"
          >
            {{ cartService.itemCount() }}
          </span>
        }
      </a>

      <!-- User/Auth -->
      <div>
        @if (authService.isAuthenticated()) {
          <a routerLink="profile">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M17.2356 20C17.8451 20 18.4071 19.6713 18.7059 19.1401V19.1401C19.0219 18.5784 18.9872 17.8849 18.5194 17.4417C17.5128 16.488 15.3978 15 12 15C8.60834 15 6.59708 16.4827 5.6541 17.4365C5.20946 17.8863 5.19264 18.5647 5.50271 19.1159C5.80123 19.6506 6.36323 20 6.97292 20H17.2356Z"
                stroke="#212121"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M12.1111 11.1111C14.0748 11.1111 15.6667 9.51924 15.6667 7.55556C15.6667 5.59188 14.0748 4 12.1111 4C10.1474 4 8.55556 5.59188 8.55556 7.55556C8.55556 9.51924 10.1474 11.1111 12.1111 11.1111Z"
                stroke="#212121"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </a>
        } @else {
          <a
            routerLink="/auth/login"
            class="flex h-[44px] items-center rounded-full border border-green-60 px-3.5 py-2 text-sm font-semibold text-green-60"
            >შესვლა</a
          >
        }
      </div>

      <!-- Hamburger Menu (Mobile only) -->
      <button
        class="p-2 xl:hidden"
        (click)="toggleMobileMenu()"
        [attr.aria-label]="mobileMenuOpen() ? 'Close menu' : 'Open menu'"
      >
        @if (mobileMenuOpen()) {
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M18 6L6 18M6 6L18 18"
              stroke="#212121"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        } @else {
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M3 12H21M3 6H21M3 18H21"
              stroke="#212121"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        }
      </button>
    </div>
  </div>
</nav>

<!-- Mobile Menu -->
@if (mobileMenuOpen()) {
  <div
    class="fixed left-0 right-0 top-[72px] z-50 h-[calc(100vh-72px)] overflow-y-auto bg-white xl:hidden"
  >
    <div class="mb-14 flex h-full flex-col">
      <!-- Mobile Menu Links -->
      <nav class="flex-1 space-y-1">
        @for (navUrl of navUrls; track $index) {
          <a
            [routerLink]="navUrl.url"
            routerLinkActive="text-green-600"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="closeMobileMenu()"
            class="flex h-14 items-center justify-between gap-3 rounded-lg px-4 py-2 text-base font-semibold text-platinum-90 hover:bg-platinum-10"
          >
            <div class="flex items-center gap-4">
              <div
                class="flex h-10 w-10 items-center justify-center rounded-full bg-green-10"
              >
                <img src="/assets/images/navbar/{{ navUrl.url }}.svg" />
              </div>

              {{ navUrl.name }}
            </div>

            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M9 18L14.6854 12.7071C15.1049 12.3166 15.1049 11.6834 14.6854 11.2929L9 6"
                stroke="#888888"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </a>
        }
      </nav>

      <!-- Auth Buttons -->
      <div class="space-y-3 border-t border-platinum-20 px-4 pt-6">
        <a
          routerLink="/auth/register"
          class="inline-flex h-11 w-full items-center justify-center gap-2 rounded-full border-[1.5px] border-white/40 px-6 py-3 font-medium text-white transition-all hover:brightness-95"
          style="
            background: linear-gradient(
              90deg,
              #0ad810 0%,
              #0bb705 35%,
              #0bb705 65%,
              #0ad810 100%
            );
            box-shadow: 0px 20px 16px -8px #0ad10426;
          "
        >
          რეგისტრაცია
        </a>
        <a
          routerLink="/auth/login"
          class="inline-flex w-full items-center justify-center gap-2 rounded-full border-[1.5px] border-green-60 px-6 py-3 font-medium text-green-60"
        >
          ავტორიზაცია
        </a>
      </div>
    </div>
  </div>
}
